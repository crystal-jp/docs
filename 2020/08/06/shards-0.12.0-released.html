<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Shards 0.12.0 released! - The Crystal Programming Language</title>
    <meta charset='utf-8'>
    <!-- Import Google Icon Font -->
    <link href='https://fonts.googleapis.com/icon?family=Material+Icons|Roboto+Mono' rel='stylesheet'>
    <link href="/assets/stylesheet.css" rel="stylesheet" />
    <link href='/feed.xml' rel='alternate' title='Atom 1.0' type='application/atom+xml'>
    <link href='/favicon.png' rel='icon' type='image/png'>
    <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Shards 0.12.0 released! | プログラミング言語 Crystal</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Shards 0.12.0 released!" />
<meta name="author" content="bcardiff" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Shards 0.12.0 has been released!" />
<meta property="og:description" content="Shards 0.12.0 has been released!" />
<link rel="canonical" href="https://ja.crystal-lang.org/2020/08/06/shards-0.12.0-released.html" />
<meta property="og:url" content="https://ja.crystal-lang.org/2020/08/06/shards-0.12.0-released.html" />
<meta property="og:site_name" content="プログラミング言語 Crystal" />
<meta property="og:image" content="https://ja.crystal-lang.org/assets/icon.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-08-06T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://ja.crystal-lang.org/assets/icon.png" />
<meta property="twitter:title" content="Shards 0.12.0 released!" />
<meta name="twitter:site" content="@CrystalLanguage" />
<meta name="twitter:creator" content="@bcardiff" />
<script type="application/ld+json">
{"datePublished":"2020-08-06T00:00:00+00:00","dateModified":"2020-08-06T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ja.crystal-lang.org/2020/08/06/shards-0.12.0-released.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ja.crystal-lang.org/assets/media/crystal_logo.svg"},"name":"bcardiff"},"url":"https://ja.crystal-lang.org/2020/08/06/shards-0.12.0-released.html","author":{"@type":"Person","name":"bcardiff"},"@type":"BlogPosting","image":"https://ja.crystal-lang.org/assets/icon.png","headline":"Shards 0.12.0 released!","description":"Shards 0.12.0 has been released!","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Let browser know website is optimized for mobile -->
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <script src='https://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="wrapper ">
  <nav role='navigation'>
  <div class='nav-wrapper no-select'>
    
      <a class='brand-logo' id='logo-container'>
        <canvas height='120' id='logo-canvas' style='cursor:move' width='120'></canvas>
      </a>
    
    <ul class='right hide-on-med-and-down' id='nav-desktop'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/conference/">
      Conference
    </a>
  </li>
<li>
    <a href="/team/">
      Team
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <ul class='side-nav' id='nav-mobile'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/conference/">
      Conference
    </a>
  </li>
<li>
    <a href="/team/">
      Team
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <a class='button-collapse' data-activates='nav-mobile' href='#'>
      <i class='material-icons'>menu</i>
    </a>
  </div>
</nav>


  <div class='post-header'>
  <div class="container">
    <div class='valign row'>
      <div class="col m2"></div>
      <div class="col s12 m9">
        <div class="author small">
          
          
            <img src="/assets/authors/bcardiff.jpg" />
          
          
            <span class="author_name">Brian J. Cardiff</span>
          
          <span class="date">06 Aug 2020</span>
        </div>

        <h1 class='title'>Shards 0.12.0 released!</h1>
      </div>
      <div class="col m1"></div>
    </div>
  </div>
</div>


<main>
  <div class="container">
    <div class="row post-layout">
      <div class="col m2 share">
        <p class="title small share-title">Share</p>
        <div class="share-list">
          
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fja.crystal-lang.org%2F2020%2F08%2F06%2Fshards-0.12.0-released.html&text=Shards+0.12.0+released%21&via=CrystalLanguage" target="_blank">
            <div class="share-item"><i class="extra-icons twitter gray"></i></div>
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fja.crystal-lang.org%2F2020%2F08%2F06%2Fshards-0.12.0-released.html" target="_blank">
            <div class="share-item"><i class="extra-icons facebook gray"></i></div>
          </a>
          <a href="https://plus.google.com/share?url=https%3A%2F%2Fja.crystal-lang.org%2F2020%2F08%2F06%2Fshards-0.12.0-released.html" target="_blank">
            <div class="share-item"><i class="extra-icons google_plus gray"></i></div>
            </a>
        </div>
      </div>

      <div class="col s12 m9">
        <p><a href="https://github.com/crystal-lang/shards/releases/tag/v0.12.0">Shards 0.12.0</a> has been released!</p>

<p>This release of shards is focused on solving some papercuts issues and adding features that will come in handy to enable a healthy package ecosystem that will work against different versions of the language, plus reducing the friction of working on fixes here and there. Don’t miss out on the rest of the <a href="https://github.com/crystal-lang/shards/releases/tag/v0.12.0">release changelog</a>.</p>

<blockquote>
  <p>NOTE: To use this new release you will need to build shards from sources or use a nightly Crystal release until 1.0.0-pre1 is tagged.</p>
</blockquote>

<p>You shall notice better error messages when a dependency’s <code class="language-crystal highlighter-rouge"><span class="n">shard</span><span class="p">.</span><span class="nf">yml</span></code> file triggers an error thanks to <a href="https://github.com/crystal-lang/shards/pull/408">#408</a>.</p>

<p>During development you might need to switch the source or fork of a dependency. This scenario was not being handled correctly in multiple commands and should be fixed now. When possible, shards will try to honor the version chosen despite the change of source. If the source ends up ambiguous, an error will be displayed.</p>

<p>A source will be ambiguous, for example, if your application requires packages <code class="language-crystal highlighter-rouge"><span class="no">A</span></code> and <code class="language-crystal highlighter-rouge"><span class="no">B</span></code> that both require <code class="language-crystal highlighter-rouge"><span class="no">C</span></code> but they point to different forks. Read more at <a href="https://github.com/crystal-lang/shards/pull/419">#419</a>, <a href="https://github.com/crystal-lang/shards/pull/429">#429</a>.</p>

<p>In a previous release the crystal property became effectively mandatory and is used to declare for which versions of the compiler and std-lib the package is expected to work. At the same time, the flag <code class="language-crystal highlighter-rouge"><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code> was added to opt-out this check. Sometimes shards might just work with another crystal version than the one declared. We encourage maintainers to test, publish and declare the crystal versions they choose to support.</p>

<p>During the development of a major crystal release with potential breaking-changes (from 0.x to 1.x, and 1.x to 2.x) it is reasonable to run projects’ CIs against nightly with <code class="language-crystal highlighter-rouge"><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code>. Once the stable major release is out and the ecosystem caught up, there will be no need for <code class="language-crystal highlighter-rouge"><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code>. Note that using the crystal property helps prune the search space.</p>

<p>In this release Shards will read the <code class="language-crystal highlighter-rouge"><span class="no">SHARDS_OPTS</span></code> environment variable for additional CLI options. So the CI can use <code class="language-crystal highlighter-rouge"><span class="no">SHARDS_OPTS</span><span class="o">=--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code> if the <code class="language-crystal highlighter-rouge"><span class="n">shards</span> <span class="n">install</span></code> command is implicitly run somewhere. Read more at <a href="https://github.com/crystal-lang/shards/pull/417">#417</a>, <a href="https://github.com/crystal-lang/shards/pull/420">#420</a>.</p>

<p>The featured feature of this release is shards overrides. Since it’s the first iteration of it, we are eager for feedback. We expect this first cut will enable and simplify some workflows and also assist in the transition on the upcoming major release of crystal. The feature was implemented in <a href="https://github.com/crystal-lang/shards/pull/422">#422</a> and it’s motivation is explained in <a href="https://github.com/crystal-lang/shards/issues/412">#412</a>.</p>

<p>With local overrides feature you will be able to have a <code class="language-crystal highlighter-rouge"><span class="n">shard</span><span class="p">.</span><span class="nf">override</span><span class="p">.</span><span class="nf">yml</span></code> or specify such file using <code class="language-crystal highlighter-rouge"><span class="no">SHARDS_OVERRIDE</span></code> environment variable. If a dependency is listed in the override file, that version will be used, no matter what the rest of the dependency graph states.</p>

<p>With the above mentioned logic there are a couple of workflows that become simpler:</p>

<ul>
  <li>As the developer of a shard I might use my working copy of it instead of checking out a new version.</li>
  <li>Bypass restrictions of intermediate packages that might be preventing me to use newer releases.</li>
  <li>Work on a patch on a deep dependency without needing to fork and tweak dependencies all the way down.</li>
  <li>Test against upstream development of dependencies without complicating the development workflow.</li>
</ul>

<p>How are you going to use these new features?</p>

      </div>
      <div class="col m1"></div>
    </div>

    <div class="row disqus">
      <div class="col m2"></div>
      <div class="col s12 m9" id='disqus_thread'>
        <p><a href="https://github.com/crystal-lang/shards/releases/tag/v0.12.0">Shards 0.12.0</a> has been released!</p>

<p>This release of shards is focused on solving some papercuts issues and adding features that will come in handy to enable a healthy package ecosystem that will work against different versions of the language, plus reducing the friction of working on fixes here and there. Don’t miss out on the rest of the <a href="https://github.com/crystal-lang/shards/releases/tag/v0.12.0">release changelog</a>.</p>

<blockquote>
  <p>NOTE: To use this new release you will need to build shards from sources or use a nightly Crystal release until 1.0.0-pre1 is tagged.</p>
</blockquote>

<p>You shall notice better error messages when a dependency’s <code class="language-crystal highlighter-rouge"><span class="n">shard</span><span class="p">.</span><span class="nf">yml</span></code> file triggers an error thanks to <a href="https://github.com/crystal-lang/shards/pull/408">#408</a>.</p>

<p>During development you might need to switch the source or fork of a dependency. This scenario was not being handled correctly in multiple commands and should be fixed now. When possible, shards will try to honor the version chosen despite the change of source. If the source ends up ambiguous, an error will be displayed.</p>

<p>A source will be ambiguous, for example, if your application requires packages <code class="language-crystal highlighter-rouge"><span class="no">A</span></code> and <code class="language-crystal highlighter-rouge"><span class="no">B</span></code> that both require <code class="language-crystal highlighter-rouge"><span class="no">C</span></code> but they point to different forks. Read more at <a href="https://github.com/crystal-lang/shards/pull/419">#419</a>, <a href="https://github.com/crystal-lang/shards/pull/429">#429</a>.</p>

<p>In a previous release the crystal property became effectively mandatory and is used to declare for which versions of the compiler and std-lib the package is expected to work. At the same time, the flag <code class="language-crystal highlighter-rouge"><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code> was added to opt-out this check. Sometimes shards might just work with another crystal version than the one declared. We encourage maintainers to test, publish and declare the crystal versions they choose to support.</p>

<p>During the development of a major crystal release with potential breaking-changes (from 0.x to 1.x, and 1.x to 2.x) it is reasonable to run projects’ CIs against nightly with <code class="language-crystal highlighter-rouge"><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code>. Once the stable major release is out and the ecosystem caught up, there will be no need for <code class="language-crystal highlighter-rouge"><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code>. Note that using the crystal property helps prune the search space.</p>

<p>In this release Shards will read the <code class="language-crystal highlighter-rouge"><span class="no">SHARDS_OPTS</span></code> environment variable for additional CLI options. So the CI can use <code class="language-crystal highlighter-rouge"><span class="no">SHARDS_OPTS</span><span class="o">=--</span><span class="n">ignore</span><span class="o">-</span><span class="n">crystal</span><span class="o">-</span><span class="n">version</span></code> if the <code class="language-crystal highlighter-rouge"><span class="n">shards</span> <span class="n">install</span></code> command is implicitly run somewhere. Read more at <a href="https://github.com/crystal-lang/shards/pull/417">#417</a>, <a href="https://github.com/crystal-lang/shards/pull/420">#420</a>.</p>

<p>The featured feature of this release is shards overrides. Since it’s the first iteration of it, we are eager for feedback. We expect this first cut will enable and simplify some workflows and also assist in the transition on the upcoming major release of crystal. The feature was implemented in <a href="https://github.com/crystal-lang/shards/pull/422">#422</a> and it’s motivation is explained in <a href="https://github.com/crystal-lang/shards/issues/412">#412</a>.</p>

<p>With local overrides feature you will be able to have a <code class="language-crystal highlighter-rouge"><span class="n">shard</span><span class="p">.</span><span class="nf">override</span><span class="p">.</span><span class="nf">yml</span></code> or specify such file using <code class="language-crystal highlighter-rouge"><span class="no">SHARDS_OVERRIDE</span></code> environment variable. If a dependency is listed in the override file, that version will be used, no matter what the rest of the dependency graph states.</p>

<p>With the above mentioned logic there are a couple of workflows that become simpler:</p>

<ul>
  <li>As the developer of a shard I might use my working copy of it instead of checking out a new version.</li>
  <li>Bypass restrictions of intermediate packages that might be preventing me to use newer releases.</li>
  <li>Work on a patch on a deep dependency without needing to fork and tweak dependencies all the way down.</li>
  <li>Test against upstream development of dependencies without complicating the development workflow.</li>
</ul>

<p>How are you going to use these new features?</p>

      </div>
      <div class="col m1"></div>
    </div>
  </div>
</main>


  <footer>
  <div class="row">
    <div class="col s12 m12 l6 crystal">
      Crystal is licensed under the Apache License,
      <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>
        Version 2.0
      </a>
    </div>
    <div class="col s12 m12 l6 manas right-align black-text">
      Crystal language, born & raised at
      <a href="https://manas.tech" target="_blank" class="black-text">Manas</a>
      <a href="https://manas.tech" target="_blank" class="logo">
        <i class="manas"></i>
      </a>
    </div>
  </div>
</footer>

</div>


    <script src="/assets/js/bundle.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42353458-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
