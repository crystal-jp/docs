<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Crystal 1.2.0 is released! - The Crystal Programming Language</title>
    <meta charset='utf-8'>
    <!-- Import Google Icon Font -->
    <link href='https://fonts.googleapis.com/icon?family=Material+Icons|Roboto+Mono' rel='stylesheet'>
    <link href="/assets/stylesheet.css" rel="stylesheet" />
    <link href='/feed.xml' rel='alternate' title='Atom 1.0' type='application/atom+xml'>
    <link href='/favicon.png' rel='icon' type='image/png'>
    <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Crystal 1.2.0 is released! | プログラミング言語 Crystal</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Crystal 1.2.0 is released!" />
<meta name="author" content="beta-ziliani" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We are delivering a new release with several bugfixes and improvements. Below we list the most important or interesting changes, without mentioning the several bugfixes. For details visit the release’s notes. Breaking changes are marked with ⚠️." />
<meta property="og:description" content="We are delivering a new release with several bugfixes and improvements. Below we list the most important or interesting changes, without mentioning the several bugfixes. For details visit the release’s notes. Breaking changes are marked with ⚠️." />
<link rel="canonical" href="https://ja.crystal-lang.org/2021/10/14/1.2.0-released.html" />
<meta property="og:url" content="https://ja.crystal-lang.org/2021/10/14/1.2.0-released.html" />
<meta property="og:site_name" content="プログラミング言語 Crystal" />
<meta property="og:image" content="https://ja.crystal-lang.org/assets/icon.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-14T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://ja.crystal-lang.org/assets/icon.png" />
<meta property="twitter:title" content="Crystal 1.2.0 is released!" />
<meta name="twitter:site" content="@CrystalLanguage" />
<meta name="twitter:creator" content="@beta-ziliani" />
<script type="application/ld+json">
{"datePublished":"2021-10-14T00:00:00+00:00","dateModified":"2021-10-14T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ja.crystal-lang.org/2021/10/14/1.2.0-released.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ja.crystal-lang.org/assets/media/crystal_logo.svg"},"name":"beta-ziliani"},"url":"https://ja.crystal-lang.org/2021/10/14/1.2.0-released.html","author":{"@type":"Person","name":"beta-ziliani"},"@type":"BlogPosting","image":"https://ja.crystal-lang.org/assets/icon.png","headline":"Crystal 1.2.0 is released!","description":"We are delivering a new release with several bugfixes and improvements. Below we list the most important or interesting changes, without mentioning the several bugfixes. For details visit the release’s notes. Breaking changes are marked with ⚠️.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Let browser know website is optimized for mobile -->
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <script src='https://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="wrapper ">
  <nav role='navigation'>
  <div class='nav-wrapper no-select'>
    
      <a class='brand-logo' id='logo-container'>
        <canvas height='120' id='logo-canvas' style='cursor:move' width='120'></canvas>
      </a>
    
    <ul class='right hide-on-med-and-down' id='nav-desktop'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/conference/">
      Conference
    </a>
  </li>
<li>
    <a href="/team/">
      Team
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <ul class='side-nav' id='nav-mobile'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/conference/">
      Conference
    </a>
  </li>
<li>
    <a href="/team/">
      Team
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <a class='button-collapse' data-activates='nav-mobile' href='#'>
      <i class='material-icons'>menu</i>
    </a>
  </div>
</nav>


  <div class='post-header'>
  <div class="container">
    <div class='valign row'>
      <div class="col m2"></div>
      <div class="col s12 m9">
        <div class="author small">
          
          
            <img src="/assets/authors/beta-ziliani.jpg" />
          
          
            <span class="author_name">Beta Ziliani</span>
          
          <span class="date">14 Oct 2021</span>
        </div>

        <h1 class='title'>Crystal 1.2.0 is released!</h1>
      </div>
      <div class="col m1"></div>
    </div>
  </div>
</div>


<main>
  <div class="container">
    <div class="row post-layout">
      <div class="col m2 share">
        <p class="title small share-title">Share</p>
        <div class="share-list">
          
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fja.crystal-lang.org%2F2021%2F10%2F14%2F1.2.0-released.html&text=Crystal+1.2.0+is+released%21&via=CrystalLanguage" target="_blank">
            <div class="share-item"><i class="extra-icons twitter gray"></i></div>
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fja.crystal-lang.org%2F2021%2F10%2F14%2F1.2.0-released.html" target="_blank">
            <div class="share-item"><i class="extra-icons facebook gray"></i></div>
          </a>
          <a href="https://plus.google.com/share?url=https%3A%2F%2Fja.crystal-lang.org%2F2021%2F10%2F14%2F1.2.0-released.html" target="_blank">
            <div class="share-item"><i class="extra-icons google_plus gray"></i></div>
            </a>
        </div>
      </div>

      <div class="col s12 m9">
        <p>We are delivering a new release with several bugfixes and improvements. Below we list the most important or interesting changes, without mentioning the several bugfixes. For details visit the <a href="https://github.com/crystal-lang/crystal/releases/tag/1.2.0">release’s notes</a>. Breaking changes are marked with ⚠️.</p>

<h2 id="stats">Stats</h2>

<p>In this release we included <a href="https://github.com/crystal-lang/crystal/pulls?q=is%3Apr+milestone%3A1.2.0">181 PRs since the 1.1.1 release</a> by 32 contributors. We thank all the effort put into improving the language and its stdlib! ❤️</p>

<h2 id="platform-support">Platform support</h2>

<p>As mentioned in the preparatory <a href="https://crystal-lang.org/2021/09/30/preparing-1.2.html">blog post</a> for 1.2, we decided to lower the support for 32-bit x86 architecture. This is a direct consequence of focusing our efforts in more popular platforms: we do have some good news to share!</p>

<p>We are making progress in achieving full native Windows support, in this release including most notably a sockets implementation (<a href="https://github.com/crystal-lang/crystal/pull/11205">#11205</a>, <a href="https://github.com/crystal-lang/crystal/pull/11137">#11137</a>, <a href="https://github.com/crystal-lang/crystal/pull/10784">#10605</a>, <a href="https://github.com/crystal-lang/crystal/pull/10605">#10605</a>).</p>

<p>Related to Windows, and also relevant for ARM64 architectures, we fixed an important <a href="https://github.com/crystal-lang/crystal/pull/11189">codegen bug</a>. We are now in conditions to promote aarch64 platforms to Tier 1, expecting to include packages for them soon. This is also relevant for macOS with the M1 chipset: starting from this release we include a <a href="https://github.com/crystal-lang/crystal/releases/download/1.2.0/crystal-1.2.0-1.universal.pkg">universal macOS package</a> that works for x86 and M1 macs.</p>

<p>We discovered that two bugs appearing on <a href="https://github.com/crystal-lang/crystal/issues/11047">Windows</a> and <a href="https://github.com/crystal-lang/crystal/issues/11021">M1’s macs</a> are coming from LLVM 11 and 12. We expect the fix will come with the recently released LLVM 13. Crystal 1.2.0 is compatible with <a href="https://github.com/crystal-lang/crystal/pull/10873">LLVM 12</a>, although we advice against using LLVM 11 and 12.</p>

<h2 id="language-changes">Language changes</h2>

<p>It is now possible to assign a subclass of a generic class to an element of <a href="https://github.com/crystal-lang/crystal/pull/11250">the parent class</a>:</p>

<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="no">T</span><span class="p">);</span> <span class="k">end</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="no">T</span><span class="p">)</span> <span class="o">&lt;</span> <span class="no">Foo</span><span class="p">(</span><span class="no">T</span><span class="p">);</span> <span class="k">end</span>

<span class="n">x</span> <span class="o">=</span> <span class="no">Foo</span>
<span class="n">x</span> <span class="o">=</span> <span class="no">Bar</span>
</code></pre></div></div>

<p>Also pertain to generic classes, there were situations in which the compiler was not properly substituting the generic argument (<a href="https://github.com/crystal-lang/crystal/pull/11166">#11166</a>, <a href="https://github.com/crystal-lang/crystal/pull/11067">#11067</a>.</p>

<p>The support for <a href="https://clang.llvm.org/docs/ThinLTO.html">ThinLTO</a> compilation was <a href="https://github.com/crystal-lang/crystal/pull/11194">dropped</a>, since it wasn’t working already since Crystal 0.25.</p>

<h2 id="macros">Macros</h2>

<p>It is possible to add an underscore in <a href="https://github.com/crystal-lang/crystal/pull/11141">for loops</a> to ignore a value. For instance, in the following code the keys of the map are ignored:</p>
<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="p">{%</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">i</span> <span class="k">in</span> <span class="p">{</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="p">}</span> <span class="p">%}</span>
  <span class="nb">p</span> <span class="p">{{</span><span class="n">v</span> <span class="o">+</span> <span class="n">i</span><span class="p">}}</span>
<span class="p">{%</span> <span class="k">end</span> <span class="p">%}</span>
</code></pre></div></div>

<p>Additionally, there is a new <a href="https://crystal-lang.org/api/1.2.0/Crystal/Macros.html#file_exists?(filename):BoolLiteral-instance-method"><code class="language-crystal highlighter-rouge"><span class="n">file_exists?</span></code> macro method</a> to check the existence of a file (<a href="https://github.com/crystal-lang/crystal/pull/10540">#10540</a>), and <a href="https://crystal-lang.org/api/1.2.0/Crystal/Macros/ASTNode.html#is_a?(type:TypeNode):BoolLiteral-instance-method"><code class="language-crystal highlighter-rouge"><span class="c1">#is_a?</span></code></a> now recognizes the AST node hierarchy (<a href="https://github.com/crystal-lang/crystal/pull/11062">#11062</a>).</p>

<h2 id="stdlib">Stdlib</h2>

<p>⚠️ We are continuing the trend started in the 1.1.0 version to help get better error messages and documentation: several methods were annotated with expected types. Adding typing annotations might break existing code in specific scenarios so, if this happens to you, please let us now.</p>

<h3 id="numeric">Numeric</h3>

<p>The major improvement in the numeric area is the steps taken to support 128 bits integers (<a href="https://github.com/crystal-lang/crystal/pull/11206/">#11206</a> and <a href="https://github.com/crystal-lang/crystal/pull/11245">#11245</a>).</p>

<p>As minor improvements, it is now possible to adjust the precision in the output of <a href="https://github.com/crystal-lang/crystal/pull/10926">Int#to_s</a>; to iterate the set of representable floats through new methods <a href="https://github.com/crystal-lang/crystal/pull/10908"><code class="language-crystal highlighter-rouge"><span class="c1">#next_float</span></code> and <code class="language-crystal highlighter-rouge"><span class="c1">#prev_float</span></code></a>;
to use a negative exponential to a <a href="https://github.com/crystal-lang/crystal/pull/10892">BigDecimal</a>; and to calculate the <a href="https://github.com/crystal-lang/crystal/pull/10549">integer square root</a> of a number.</p>

<h3 id="collections">Collections</h3>

<p>Mutable collections now include a <a href="https://github.com/crystal-lang/crystal/pull/11059"><code class="language-crystal highlighter-rouge"><span class="no">Indexable</span><span class="o">::</span><span class="no">Mutable</span><span class="p">(</span><span class="no">T</span><span class="p">)</span></code> module</a>, which greatly expand the set of operations on certain collections such as <code class="language-crystal highlighter-rouge"><span class="no">BitArray</span></code> and <code class="language-crystal highlighter-rouge"><span class="no">Deque</span></code>. The following now works:</p>

<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="n">ba</span> <span class="o">=</span> <span class="no">BitArray</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># ba is BitArray[0000000000]</span>
<span class="n">ba</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kp">true</span>          <span class="c1"># ba is BitArray[1000000000]</span>
<span class="n">ba</span><span class="p">.</span><span class="nf">rotate!</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>        <span class="c1"># ba is BitArray[0100000000]</span>
</code></pre></div></div>

<p>Additionally, <code class="language-crystal highlighter-rouge"><span class="no">Indexable</span><span class="o">::</span><span class="no">Mutable</span><span class="p">(</span><span class="no">T</span><span class="p">)</span></code> was expanded to include stable and unstable sorting methods (<a href="https://github.com/crystal-lang/crystal/pull/11254">#11254</a>, <a href="https://github.com/crystal-lang/crystal/pull/11029">#11029</a>, <a href="https://github.com/crystal-lang/crystal/pull/10163">#10163</a>). The default <code class="language-crystal highlighter-rouge"><span class="n">sort</span></code> operation now calls a stable algorithm.</p>

<p>⚠️ As a breaking change, <code class="language-crystal highlighter-rouge"><span class="no">Array</span><span class="c1">#product</span></code> was deprecated in favor of the new generic and better named <a href="https://github.com/crystal-lang/crystal/pull/10013"><code class="language-crystal highlighter-rouge"><span class="no">Indexable</span><span class="c1">#cartesian_product</span></code></a>.</p>

<p>Another two contributions worth of mention: enumerables are equipped with method to tally them with a given predicate (<a href="https://github.com/crystal-lang/crystal/pull/10922">Enumerable#tally_by</a>); and the methods <code class="language-crystal highlighter-rouge"><span class="no">Array</span><span class="c1">#transpose</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Enumerable</span><span class="c1">#reject</span></code>, and <code class="language-crystal highlighter-rouge"><span class="no">Enumerable</span><span class="c1">#to_h</span></code> now work with <a href="https://github.com/crystal-lang/crystal/pull/10445">tuples</a>.</p>

<h3 id="files">Files</h3>

<p>⚠️ The method <code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write_utf8</span></code> was deprecated in favor of the more descriptive name <a href="https://github.com/crystal-lang/crystal/pull/11051"><code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write_string</span></code></a>, because you can use it to write strings in all kinds of encodings, depending on the IO’s configuration.
We also fixed a number of bugs related to using <code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write</span></code> instead of <code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write_string</span></code> to append text to an IO.</p>

<h3 id="networking">Networking</h3>

<p>⚠️ In order to improve the security of the stdlib, <code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="p">.</span><span class="nf">encode</span></code> was <a href="https://github.com/crystal-lang/crystal/pull/11248">deprecated</a> in favor of <code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="p">.</span><span class="nf">encode_path</span></code> and <code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="p">.</span><span class="nf">encode_path_segment</span></code> whith safer semantics and names better fitting to the purpose.</p>

<p>There is now support for basic authentication taken from an URI in websockets (<a href="https://github.com/crystal-lang/crystal/pull/10854">#10854</a>), and
proper handling of max-age and expires for cookies (<a href="https://github.com/crystal-lang/crystal/pull/10564">#10564</a>).</p>

<h3 id="text">Text</h3>

<p>⚠️ <code class="language-crystal highlighter-rouge"><span class="no">String</span><span class="c1">#unsafe_byte_at</span></code> was <a href="https://github.com/crystal-lang/crystal/pull/10559">deprecated</a> since <code class="language-crystal highlighter-rouge"><span class="no">String</span></code> has already a <code class="language-crystal highlighter-rouge"><span class="c1">#to_unsafe</span></code> method.</p>

<p>Crystal now supports <a href="https://github.com/crystal-lang/crystal/pull/11215">Unicode 14.0.0</a>.</p>

<h3 id="serialization">Serialization</h3>

<p>There is a new method <a href="https://github.com/crystal-lang/crystal/pull/11072"><code class="language-crystal highlighter-rouge"><span class="no">XML</span><span class="o">::</span><span class="no">Node</span><span class="c1">#namespace_definition</span></code></a> to obtain explicitly-defined XML namespaces of a node, and <code class="language-crystal highlighter-rouge"><span class="no">URI</span></code>s can now be <a href="https://github.com/crystal-lang/crystal/pull/10404">serialized</a> to JSON and YAML.</p>

<h2 id="tools-new-docs-generator">Tools: new docs generator</h2>

<p>The API docs now use <a href="https://github.com/icyleaf/markd/">markd</a> to render Markdown (<a href="https://github.com/crystal-lang/crystal/pull/11040">#11040</a>). This puts an end to the shortcomings caused by the internal renderer implementation.</p>

<h2 id="infrastructure">Infrastructure</h2>

<p>It is now possible to <a href="https://github.com/crystal-lang/crystal/pull/10878"><code class="language-crystal highlighter-rouge"><span class="n">make</span> <span class="n">install</span></code></a> Crystal.</p>

<hr />
<p>We have been able to do all of this thanks to the continued support of <a href="https://www.84codes.com/">84codes</a>, <a href="https://nikolamotor.com/">Nikola Motor Company</a> and every other <a href="/sponsors">sponsor</a>. To maintain and increase the development pace, donations and sponsorships are essential. <a href="https://opencollective.com/crystal-lang">OpenCollective</a> is available for that. Reach out to <a href="mailto:crystal@manas.tech">crystal@manas.tech</a> if you’d like to become a direct sponsor or find other ways to support Crystal. We thank you in advance!</p>

      </div>
      <div class="col m1"></div>
    </div>

    <div class="row disqus">
      <div class="col m2"></div>
      <div class="col s12 m9" id='disqus_thread'>
        <p>We are delivering a new release with several bugfixes and improvements. Below we list the most important or interesting changes, without mentioning the several bugfixes. For details visit the <a href="https://github.com/crystal-lang/crystal/releases/tag/1.2.0">release’s notes</a>. Breaking changes are marked with ⚠️.</p>

<h2 id="stats">Stats</h2>

<p>In this release we included <a href="https://github.com/crystal-lang/crystal/pulls?q=is%3Apr+milestone%3A1.2.0">181 PRs since the 1.1.1 release</a> by 32 contributors. We thank all the effort put into improving the language and its stdlib! ❤️</p>

<h2 id="platform-support">Platform support</h2>

<p>As mentioned in the preparatory <a href="https://crystal-lang.org/2021/09/30/preparing-1.2.html">blog post</a> for 1.2, we decided to lower the support for 32-bit x86 architecture. This is a direct consequence of focusing our efforts in more popular platforms: we do have some good news to share!</p>

<p>We are making progress in achieving full native Windows support, in this release including most notably a sockets implementation (<a href="https://github.com/crystal-lang/crystal/pull/11205">#11205</a>, <a href="https://github.com/crystal-lang/crystal/pull/11137">#11137</a>, <a href="https://github.com/crystal-lang/crystal/pull/10784">#10605</a>, <a href="https://github.com/crystal-lang/crystal/pull/10605">#10605</a>).</p>

<p>Related to Windows, and also relevant for ARM64 architectures, we fixed an important <a href="https://github.com/crystal-lang/crystal/pull/11189">codegen bug</a>. We are now in conditions to promote aarch64 platforms to Tier 1, expecting to include packages for them soon. This is also relevant for macOS with the M1 chipset: starting from this release we include a <a href="https://github.com/crystal-lang/crystal/releases/download/1.2.0/crystal-1.2.0-1.universal.pkg">universal macOS package</a> that works for x86 and M1 macs.</p>

<p>We discovered that two bugs appearing on <a href="https://github.com/crystal-lang/crystal/issues/11047">Windows</a> and <a href="https://github.com/crystal-lang/crystal/issues/11021">M1’s macs</a> are coming from LLVM 11 and 12. We expect the fix will come with the recently released LLVM 13. Crystal 1.2.0 is compatible with <a href="https://github.com/crystal-lang/crystal/pull/10873">LLVM 12</a>, although we advice against using LLVM 11 and 12.</p>

<h2 id="language-changes">Language changes</h2>

<p>It is now possible to assign a subclass of a generic class to an element of <a href="https://github.com/crystal-lang/crystal/pull/11250">the parent class</a>:</p>

<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="no">T</span><span class="p">);</span> <span class="k">end</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="no">T</span><span class="p">)</span> <span class="o">&lt;</span> <span class="no">Foo</span><span class="p">(</span><span class="no">T</span><span class="p">);</span> <span class="k">end</span>

<span class="n">x</span> <span class="o">=</span> <span class="no">Foo</span>
<span class="n">x</span> <span class="o">=</span> <span class="no">Bar</span>
</code></pre></div></div>

<p>Also pertain to generic classes, there were situations in which the compiler was not properly substituting the generic argument (<a href="https://github.com/crystal-lang/crystal/pull/11166">#11166</a>, <a href="https://github.com/crystal-lang/crystal/pull/11067">#11067</a>.</p>

<p>The support for <a href="https://clang.llvm.org/docs/ThinLTO.html">ThinLTO</a> compilation was <a href="https://github.com/crystal-lang/crystal/pull/11194">dropped</a>, since it wasn’t working already since Crystal 0.25.</p>

<h2 id="macros">Macros</h2>

<p>It is possible to add an underscore in <a href="https://github.com/crystal-lang/crystal/pull/11141">for loops</a> to ignore a value. For instance, in the following code the keys of the map are ignored:</p>
<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="p">{%</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">i</span> <span class="k">in</span> <span class="p">{</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="o">=&gt;</span> <span class="mi">6</span><span class="p">}</span> <span class="p">%}</span>
  <span class="nb">p</span> <span class="p">{{</span><span class="n">v</span> <span class="o">+</span> <span class="n">i</span><span class="p">}}</span>
<span class="p">{%</span> <span class="k">end</span> <span class="p">%}</span>
</code></pre></div></div>

<p>Additionally, there is a new <a href="https://crystal-lang.org/api/1.2.0/Crystal/Macros.html#file_exists?(filename):BoolLiteral-instance-method"><code class="language-crystal highlighter-rouge"><span class="n">file_exists?</span></code> macro method</a> to check the existence of a file (<a href="https://github.com/crystal-lang/crystal/pull/10540">#10540</a>), and <a href="https://crystal-lang.org/api/1.2.0/Crystal/Macros/ASTNode.html#is_a?(type:TypeNode):BoolLiteral-instance-method"><code class="language-crystal highlighter-rouge"><span class="c1">#is_a?</span></code></a> now recognizes the AST node hierarchy (<a href="https://github.com/crystal-lang/crystal/pull/11062">#11062</a>).</p>

<h2 id="stdlib">Stdlib</h2>

<p>⚠️ We are continuing the trend started in the 1.1.0 version to help get better error messages and documentation: several methods were annotated with expected types. Adding typing annotations might break existing code in specific scenarios so, if this happens to you, please let us now.</p>

<h3 id="numeric">Numeric</h3>

<p>The major improvement in the numeric area is the steps taken to support 128 bits integers (<a href="https://github.com/crystal-lang/crystal/pull/11206/">#11206</a> and <a href="https://github.com/crystal-lang/crystal/pull/11245">#11245</a>).</p>

<p>As minor improvements, it is now possible to adjust the precision in the output of <a href="https://github.com/crystal-lang/crystal/pull/10926">Int#to_s</a>; to iterate the set of representable floats through new methods <a href="https://github.com/crystal-lang/crystal/pull/10908"><code class="language-crystal highlighter-rouge"><span class="c1">#next_float</span></code> and <code class="language-crystal highlighter-rouge"><span class="c1">#prev_float</span></code></a>;
to use a negative exponential to a <a href="https://github.com/crystal-lang/crystal/pull/10892">BigDecimal</a>; and to calculate the <a href="https://github.com/crystal-lang/crystal/pull/10549">integer square root</a> of a number.</p>

<h3 id="collections">Collections</h3>

<p>Mutable collections now include a <a href="https://github.com/crystal-lang/crystal/pull/11059"><code class="language-crystal highlighter-rouge"><span class="no">Indexable</span><span class="o">::</span><span class="no">Mutable</span><span class="p">(</span><span class="no">T</span><span class="p">)</span></code> module</a>, which greatly expand the set of operations on certain collections such as <code class="language-crystal highlighter-rouge"><span class="no">BitArray</span></code> and <code class="language-crystal highlighter-rouge"><span class="no">Deque</span></code>. The following now works:</p>

<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="n">ba</span> <span class="o">=</span> <span class="no">BitArray</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># ba is BitArray[0000000000]</span>
<span class="n">ba</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kp">true</span>          <span class="c1"># ba is BitArray[1000000000]</span>
<span class="n">ba</span><span class="p">.</span><span class="nf">rotate!</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>        <span class="c1"># ba is BitArray[0100000000]</span>
</code></pre></div></div>

<p>Additionally, <code class="language-crystal highlighter-rouge"><span class="no">Indexable</span><span class="o">::</span><span class="no">Mutable</span><span class="p">(</span><span class="no">T</span><span class="p">)</span></code> was expanded to include stable and unstable sorting methods (<a href="https://github.com/crystal-lang/crystal/pull/11254">#11254</a>, <a href="https://github.com/crystal-lang/crystal/pull/11029">#11029</a>, <a href="https://github.com/crystal-lang/crystal/pull/10163">#10163</a>). The default <code class="language-crystal highlighter-rouge"><span class="n">sort</span></code> operation now calls a stable algorithm.</p>

<p>⚠️ As a breaking change, <code class="language-crystal highlighter-rouge"><span class="no">Array</span><span class="c1">#product</span></code> was deprecated in favor of the new generic and better named <a href="https://github.com/crystal-lang/crystal/pull/10013"><code class="language-crystal highlighter-rouge"><span class="no">Indexable</span><span class="c1">#cartesian_product</span></code></a>.</p>

<p>Another two contributions worth of mention: enumerables are equipped with method to tally them with a given predicate (<a href="https://github.com/crystal-lang/crystal/pull/10922">Enumerable#tally_by</a>); and the methods <code class="language-crystal highlighter-rouge"><span class="no">Array</span><span class="c1">#transpose</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Enumerable</span><span class="c1">#reject</span></code>, and <code class="language-crystal highlighter-rouge"><span class="no">Enumerable</span><span class="c1">#to_h</span></code> now work with <a href="https://github.com/crystal-lang/crystal/pull/10445">tuples</a>.</p>

<h3 id="files">Files</h3>

<p>⚠️ The method <code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write_utf8</span></code> was deprecated in favor of the more descriptive name <a href="https://github.com/crystal-lang/crystal/pull/11051"><code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write_string</span></code></a>, because you can use it to write strings in all kinds of encodings, depending on the IO’s configuration.
We also fixed a number of bugs related to using <code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write</span></code> instead of <code class="language-crystal highlighter-rouge"><span class="no">IO</span><span class="c1">#write_string</span></code> to append text to an IO.</p>

<h3 id="networking">Networking</h3>

<p>⚠️ In order to improve the security of the stdlib, <code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="p">.</span><span class="nf">encode</span></code> was <a href="https://github.com/crystal-lang/crystal/pull/11248">deprecated</a> in favor of <code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="p">.</span><span class="nf">encode_path</span></code> and <code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="p">.</span><span class="nf">encode_path_segment</span></code> whith safer semantics and names better fitting to the purpose.</p>

<p>There is now support for basic authentication taken from an URI in websockets (<a href="https://github.com/crystal-lang/crystal/pull/10854">#10854</a>), and
proper handling of max-age and expires for cookies (<a href="https://github.com/crystal-lang/crystal/pull/10564">#10564</a>).</p>

<h3 id="text">Text</h3>

<p>⚠️ <code class="language-crystal highlighter-rouge"><span class="no">String</span><span class="c1">#unsafe_byte_at</span></code> was <a href="https://github.com/crystal-lang/crystal/pull/10559">deprecated</a> since <code class="language-crystal highlighter-rouge"><span class="no">String</span></code> has already a <code class="language-crystal highlighter-rouge"><span class="c1">#to_unsafe</span></code> method.</p>

<p>Crystal now supports <a href="https://github.com/crystal-lang/crystal/pull/11215">Unicode 14.0.0</a>.</p>

<h3 id="serialization">Serialization</h3>

<p>There is a new method <a href="https://github.com/crystal-lang/crystal/pull/11072"><code class="language-crystal highlighter-rouge"><span class="no">XML</span><span class="o">::</span><span class="no">Node</span><span class="c1">#namespace_definition</span></code></a> to obtain explicitly-defined XML namespaces of a node, and <code class="language-crystal highlighter-rouge"><span class="no">URI</span></code>s can now be <a href="https://github.com/crystal-lang/crystal/pull/10404">serialized</a> to JSON and YAML.</p>

<h2 id="tools-new-docs-generator">Tools: new docs generator</h2>

<p>The API docs now use <a href="https://github.com/icyleaf/markd/">markd</a> to render Markdown (<a href="https://github.com/crystal-lang/crystal/pull/11040">#11040</a>). This puts an end to the shortcomings caused by the internal renderer implementation.</p>

<h2 id="infrastructure">Infrastructure</h2>

<p>It is now possible to <a href="https://github.com/crystal-lang/crystal/pull/10878"><code class="language-crystal highlighter-rouge"><span class="n">make</span> <span class="n">install</span></code></a> Crystal.</p>

<hr />
<p>We have been able to do all of this thanks to the continued support of <a href="https://www.84codes.com/">84codes</a>, <a href="https://nikolamotor.com/">Nikola Motor Company</a> and every other <a href="/sponsors">sponsor</a>. To maintain and increase the development pace, donations and sponsorships are essential. <a href="https://opencollective.com/crystal-lang">OpenCollective</a> is available for that. Reach out to <a href="mailto:crystal@manas.tech">crystal@manas.tech</a> if you’d like to become a direct sponsor or find other ways to support Crystal. We thank you in advance!</p>

      </div>
      <div class="col m1"></div>
    </div>
  </div>
</main>


  <footer>
  <div class="row">
    <div class="col s12 m12 l6 crystal">
      Crystal is licensed under the Apache License,
      <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>
        Version 2.0
      </a>
    </div>
    <div class="col s12 m12 l6 manas right-align black-text">
      Crystal language, born & raised at
      <a href="https://manas.tech" target="_blank" class="black-text">Manas</a>
      <a href="https://manas.tech" target="_blank" class="logo">
        <i class="manas"></i>
      </a>
    </div>
  </div>
</footer>

</div>


    <script src="/assets/js/bundle.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42353458-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
