<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Crystal 1.0 - What to expect - The Crystal Programming Language</title>
    <meta charset='utf-8'>
    <!-- Import Google Icon Font -->
    <link href='https://fonts.googleapis.com/icon?family=Material+Icons|Roboto+Mono' rel='stylesheet'>
    <link href="/assets/stylesheet.css" rel="stylesheet" />
    <link href='/feed.xml' rel='alternate' title='Atom 1.0' type='application/atom+xml'>
    <link href='/favicon.png' rel='icon' type='image/png'>
    <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Crystal 1.0 - What to expect | プログラミング言語 Crystal</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Crystal 1.0 - What to expect" />
<meta name="author" content="asterite,bcardiff,waj,450" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The release of the first major release of Crystal arrives after many years of hard work. With thousands of contributions from people worldwide, it was finally possible to find consensus for what truly mattered for 1.0 and what could wait for future releases. Getting here wasn’t an easy journey, filled with enriching, controversial, delightful, and endless conversations that, in the end, made it possible to build a language more useful for more users." />
<meta property="og:description" content="The release of the first major release of Crystal arrives after many years of hard work. With thousands of contributions from people worldwide, it was finally possible to find consensus for what truly mattered for 1.0 and what could wait for future releases. Getting here wasn’t an easy journey, filled with enriching, controversial, delightful, and endless conversations that, in the end, made it possible to build a language more useful for more users." />
<link rel="canonical" href="https://ja.crystal-lang.org/2021/03/22/crystal-1.0-what-to-expect.html" />
<meta property="og:url" content="https://ja.crystal-lang.org/2021/03/22/crystal-1.0-what-to-expect.html" />
<meta property="og:site_name" content="プログラミング言語 Crystal" />
<meta property="og:image" content="https://ja.crystal-lang.org/assets/icon.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-22T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://ja.crystal-lang.org/assets/icon.png" />
<meta property="twitter:title" content="Crystal 1.0 - What to expect" />
<meta name="twitter:site" content="@CrystalLanguage" />
<meta name="twitter:creator" content="@asterite,bcardiff,waj,450" />
<script type="application/ld+json">
{"datePublished":"2021-03-22T00:00:00+00:00","dateModified":"2021-03-22T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ja.crystal-lang.org/2021/03/22/crystal-1.0-what-to-expect.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ja.crystal-lang.org/assets/media/crystal_logo.svg"},"name":"asterite,bcardiff,waj,450"},"url":"https://ja.crystal-lang.org/2021/03/22/crystal-1.0-what-to-expect.html","author":{"@type":"Person","name":"asterite,bcardiff,waj,450"},"@type":"BlogPosting","image":"https://ja.crystal-lang.org/assets/icon.png","headline":"Crystal 1.0 - What to expect","description":"The release of the first major release of Crystal arrives after many years of hard work. With thousands of contributions from people worldwide, it was finally possible to find consensus for what truly mattered for 1.0 and what could wait for future releases. Getting here wasn’t an easy journey, filled with enriching, controversial, delightful, and endless conversations that, in the end, made it possible to build a language more useful for more users.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Let browser know website is optimized for mobile -->
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <script src='https://code.jquery.com/jquery-3.1.1.min.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="wrapper ">
  <nav role='navigation'>
  <div class='nav-wrapper no-select'>
    
      <a class='brand-logo' id='logo-container'>
        <canvas height='120' id='logo-canvas' style='cursor:move' width='120'></canvas>
      </a>
    
    <ul class='right hide-on-med-and-down' id='nav-desktop'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/conference/">
      Conference
    </a>
  </li>
<li>
    <a href="/team/">
      Team
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <ul class='side-nav' id='nav-mobile'>
      
<li>
    <a href="/">
      Home
    </a>
  </li>
<li>
    <a href="https://forum.crystal-lang.org" target="_blank">
      Forum
    </a>
  </li>
<li>
    <a href="/blog/">
      Blog
    </a>
  </li>
<li>
    <a href="/sponsors/">
      Sponsors
    </a>
  </li>
<li>
    <a href="/community/">
      Community
    </a>
  </li>
<li>
    <a href="/conference/">
      Conference
    </a>
  </li>
<li>
    <a href="/team/">
      Team
    </a>
  </li>
<li>
    <a href="/docs/">
      Docs
    </a>
  </li>
<li>
    <a href="https://github.com/crystal-lang/crystal" target="_blank">
      GitHub
    </a>
  </li>


    </ul>
    <a class='button-collapse' data-activates='nav-mobile' href='#'>
      <i class='material-icons'>menu</i>
    </a>
  </div>
</nav>


  <div class='post-header'>
  <div class="container">
    <div class='valign row'>
      <div class="col m2"></div>
      <div class="col s12 m9">
        <div class="author small">
          
          
            <img src="/assets/authors/asterite.jpg" />
          
            <img src="/assets/authors/bcardiff.jpg" />
          
            <img src="/assets/authors/waj.jpg" />
          
            <img src="/assets/authors/450.jpg" />
          
          
            <span class="author_name">Ary Borenzweig</span>
          
            <span class="author_name">Brian J. Cardiff</span>
          
            <span class="author_name">Juan Wajnerman</span>
          
            <span class="author_name">+450 more</span>
          
          <span class="date">22 Mar 2021</span>
        </div>

        <h1 class='title'>Crystal 1.0 - What to expect</h1>
      </div>
      <div class="col m1"></div>
    </div>
  </div>
</div>


<main>
  <div class="container">
    <div class="row post-layout">
      <div class="col m2 share">
        <p class="title small share-title">Share</p>
        <div class="share-list">
          
          <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fja.crystal-lang.org%2F2021%2F03%2F22%2Fcrystal-1.0-what-to-expect.html&text=Crystal+1.0+-+What+to+expect&via=CrystalLanguage" target="_blank">
            <div class="share-item"><i class="extra-icons twitter gray"></i></div>
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fja.crystal-lang.org%2F2021%2F03%2F22%2Fcrystal-1.0-what-to-expect.html" target="_blank">
            <div class="share-item"><i class="extra-icons facebook gray"></i></div>
          </a>
          <a href="https://plus.google.com/share?url=https%3A%2F%2Fja.crystal-lang.org%2F2021%2F03%2F22%2Fcrystal-1.0-what-to-expect.html" target="_blank">
            <div class="share-item"><i class="extra-icons google_plus gray"></i></div>
            </a>
        </div>
      </div>

      <div class="col s12 m9">
        <p>The release of the first major release of Crystal arrives after many years of hard work. With thousands of contributions from people worldwide, it was finally possible to find consensus for what truly mattered for 1.0 and what could wait for future releases. Getting here wasn’t an easy journey, filled with enriching, controversial, delightful, and endless conversations that, in the end, made it possible to build a language more useful for more users.</p>

<p>But what does it mean to have a 1.0 version? After all, the process of receiving valuable contributions and evolving the language will not stop after this milestone. Let’s dig deeper to understand the true meaning of this release for the community, especially those already using Crystal in production environments.</p>

<h2 id="language-stability">Language Stability</h2>

<p>Language stability is probably one of the most prominent and expected reasons to have Crystal 1.0 finally. We received numerous comments from people willing to use the language in production during all these years, but only after we could make a promise of not breaking it from one day to the next.</p>

<p>After this release, everyone can expect that, at least for any future 1.x version, your code can still compile and work without any significant incompatibility. Language and standard library features won’t be removed or changed in any way that could prevent existing code from compiling and working. The built-in standard library will continue to be enriched but always with backward compatibility in mind.</p>

<p>Nobody can stop this outstanding community from having groundbreaking ideas every day. But those contributions now belong to a separate branch where the vision for Crystal 2.0 will start to sprout and grow every day.</p>

<h2 id="release-plan">Release Plan</h2>

<p>To increase the project’s predictability, we plan to release maintenance releases (aka bug fixes) as patch versions. For example, the first maintenance release will be 1.0.1, and it will only include fixes of existing features.</p>

<p>New features will be reserved for the subsequent minor releases: 1.x. Again, always maintaining backward compatibility with previous versions.</p>

<p>How many 1.x versions are going to be maintained in parallel? We don’t know for sure yet. That will depend on several factors, including the availability of core team members. For now, we envision maintaining at least two minor versions. That means a 1.0.x might be released even if 1.1.0 is published.</p>

<p>Because of the “no breaking changes” rule between 1.x → 1.x+1, migration to new minor releases should be relatively easy, with migration plans to be eventually released along with new versions.</p>

<h2 id="preliminary-features">Preliminary Features</h2>

<p>There are some features currently available in Crystal that didn’t receive official support yet. We plan to keep improving them until we’re confident about their stability. These features will continue to be available on every version, and you can expect an official blessing in a future 1.x release.</p>

<h3 id="windows-support">Windows Support</h3>

<p>Tremendous progress has been made to make Crystal available on Windows platforms. But there is still tons of work to be done. However, none of that work should impact the semantics or libraries available for *NIX platforms. So we decided not to delay 1.0 because of incompleteness in this area.</p>

<p>We keep encouraging the Windows community to continue participating in the support for Crystal in this environment.</p>

<h3 id="multithreading">Multithreading</h3>

<p>Support to run the Crystal runtime on multiple cores is still a preliminary feature available through the use of the <code class="language-crystal highlighter-rouge"><span class="o">-</span><span class="no">Dpreview_mt</span></code> flag. But there are still many improvements yet to be made to guarantee the language’s expected performance and quality in a multi-core environment.</p>

<p>And it’s not only a flag to be enabled to let existing code run in parallel. Idioms and guidelines must be written to ensure a sane migration into a multi-core environment. More of this can be expected in future 1.x releases.</p>

<h3 id="arm">ARM</h3>

<p>Porting Crystal into ARM platforms was always important, mainly for embedded and mobile devices. Who didn’t dream about writing applications for iOS and Android one day in this beautiful language? However, recent announcements from Apple to use ARM in computers made this platform even more relevant for the language.</p>

<p>Significant steps have been taken to improve Crystal code’s cross-compilation, and even our CI runs most of the Crystal specs for every commit on ARM servers! However, some work is still pending to improve the experience for cross-compilation, and even some core libraries need work before we can be confident to give the “production-ready” mark on ARM machines.</p>

<h1 id="changes-this-release">Changes this release</h1>

<p>The changes that landed in 1.0.0 since 0.36.1 were focused on polishing, but it is worth mentioning some of them here as a migration process. Don’t miss out on the rest of the <a href="https://github.com/crystal-lang/crystal/releases/tag/1.0.0">release changelog</a>.</p>

<p>There were <a href="https://github.com/crystal-lang/crystal/compare/0.36.1...1.0.0">82 commits since 0.36.1</a> by 25 contributors.</p>

<p>If we count them since the project inception, there were +13000 commits by +450 contributors, +9000 issues/PRs, and, more importantly, a great community that is sharing experiences, ideas and dreams.</p>

<h2 id="language-changes">Language changes</h2>

<p>Tuples allow type-safe accessors with literal indices since the compiler knows which type each component is. In <a href="https://github.com/crystal-lang/crystal/pull/10379">#10379</a> this knowledge is also available for literal ranges.</p>

<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="n">tuple</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"hello"</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">}</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">tuple</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; {1, "hello"}</span>
<span class="n">typeof</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>       <span class="c1"># =&gt; Tuple(Int32, String)</span>
</code></pre></div></div>

<p>String and character literals are no longer allowed to have unicode surrogate halves in escape sequences. You can express arbitrary values using <code class="language-crystal highlighter-rouge"><span class="p">\</span><span class="n">x</span></code> still, so <code class="language-crystal highlighter-rouge"><span class="s2">"</span><span class="se">\uD800</span><span class="s2">"</span></code> should be <code class="language-crystal highlighter-rouge"><span class="s2">"</span><span class="se">\xED\xA0\x80</span><span class="s2">"</span></code>. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10443">#10443</a>.</p>

<h2 id="standard-library">Standard library</h2>

<p>The std-lib got rid of most of the deprecated definitions present until 0.36.1 in <a href="https://github.com/crystal-lang/crystal/pull/10386">#10386</a>. This includes dropping:</p>

<ul>
  <li>Spec <code class="language-crystal highlighter-rouge"><span class="n">should</span></code>, <code class="language-crystal highlighter-rouge"><span class="n">should_not</span></code> overload</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Int</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">String</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Time</span></code> overloads with trailing <code class="language-crystal highlighter-rouge"><span class="no">IO</span></code> parameter</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Set</span></code> methods</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">YAML</span><span class="p">.</span><span class="nf">new</span></code></li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Dir</span><span class="p">.</span><span class="nf">rmdir</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">File</span><span class="o">::</span><span class="no">Info</span><span class="c1">#owner</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">File</span><span class="o">::</span><span class="no">Info</span><span class="c1">#group</span></code></li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">Request</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">WebSocket</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">LogHandler</span></code> methods</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="c1">#full_path</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Time</span><span class="o">::</span><span class="no">Span</span><span class="c1">#duration</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">StaticArray</span><span class="c1">#[]=</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Hash</span><span class="c1">#delete_if</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Process</span><span class="c1">#kill</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">OptionParser</span><span class="p">.</span><span class="nf">parse!</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Log</span><span class="p">.</span><span class="nf">setup_from_env</span></code> overload</li>
  <li><code class="language-crystal highlighter-rouge"><span class="n">has_attribute?</span></code> macro</li>
</ul>

<h3 id="macros">Macros</h3>

<p>The <code class="language-crystal highlighter-rouge"><span class="kp">getter</span></code> and <code class="language-crystal highlighter-rouge"><span class="kp">property</span></code> macros will add the return type annotation when possible. While adding this lazy initialized property no longer accepts <code class="language-crystal highlighter-rouge"><span class="kp">nil</span></code> as a valid value. It’s confusing and you probably were not relying on that. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10405">#10405</a>.</p>

<h3 id="numeric">Numeric</h3>

<p>There were some iterations to add more rounding options to <code class="language-crystal highlighter-rouge"><span class="no">Number</span></code> and match the functionality available in other languages. <code class="language-crystal highlighter-rouge"><span class="no">Number</span><span class="c1">#round</span></code> accepts a <code class="language-crystal highlighter-rouge"><span class="no">RoundingMode</span></code> parameter to choose the exact criteria to use. There are new methods like <code class="language-crystal highlighter-rouge"><span class="no">Number</span><span class="c1">#round_even</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Number</span><span class="c1">#round_away</span></code> if you prefer them. The default rounding was changed to <code class="language-crystal highlighter-rouge"><span class="n">round_even</span></code> (a.k.a.: round nearest ties even) matching what other libc, Java, Julia and <a href="https://web.archive.org/web/20160806053349/http://www.csee.umbc.edu/~tsimo1/CMSC455/IEEE-754-2008.pdf">IEEE-754</a> recommendation.</p>

<p>The new available rounding modes are:</p>

<ul>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TIES_EVEN</span></code>: Rounds towards the nearest integer. If both neighboring integers are equidistant, rounds towards the even neighbor (Banker’s rounding).</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TIES_AWAY</span></code>: Rounds towards the nearest integer. If both neighboring integers are equidistant, rounds away from zero.</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TO_ZERO</span></code>: Rounds towards zero (truncate).</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TO_POSITIVE</span></code>: Rounds towards positive infinity (ceil).</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TO_NEGATIVE</span></code>: Rounds towards negative infinity (floor).</li>
</ul>

<p>Read more at <a href="https://github.com/crystal-lang/crystal/pull/10413">#10413</a> and <a href="https://github.com/crystal-lang/crystal/pull/10508">#10508</a>.</p>

<p>Downcasting a float with infinity, or converting an out-of-range float has a more accurate behavior. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10420">#10420</a>.</p>

<h3 id="collections">Collections</h3>

<p><code class="language-crystal highlighter-rouge"><span class="no">Enumerable</span><span class="c1">#flat_map</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Iterator</span><span class="c1">#flat_map</span></code> works now with mixed element types. As a general guideline, when dealing with multiple types of elements, check your design. You might be translating code from other languages where that is common, but in Crystal, it might not be the tidiest thing to do. Either way, in <a href="https://github.com/crystal-lang/crystal/pull/10329">#10329</a> there is room for improvement on how things are done in the std-lib to allow more and more use cases while using the existing language features.</p>

<h3 id="serialization">Serialization</h3>

<p><code class="language-crystal highlighter-rouge"><span class="no">Enum</span></code> serialization is now done as underscored string representation. If you want the old behavior, use the <code class="language-crystal highlighter-rouge"><span class="no">Enum</span><span class="o">::</span><span class="no">ValueConverter</span></code>. Using the underscore string representation is more stable if enum members are added, so we encourage it as a good default. Read more at  <a href="https://github.com/crystal-lang/crystal/pull/10431">#10431</a>.</p>

<p>The types defined in the XML module were changed from struct to classes to allow future improvements on how the GC interacts with libxml. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10436">#10436</a>.</p>

<h3 id="networking">Networking</h3>

<p>There are a couple of changes regarding how cookies are handled. In <a href="https://github.com/crystal-lang/crystal/pull/10486">#10486</a> the <code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">Cookies</span><span class="p">.</span><span class="nf">from_headers</span></code> method is split into separate server and client alternatives. And the cookie name and values are no longer encoded/decoded due to security reasons. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10442">#10442</a> and <a href="https://github.com/crystal-lang/crystal/pull/10485">#10485</a>. It is left to the framework and application to choose if there is a default encoding for cookies.</p>

<h2 id="next-steps">Next steps</h2>

<p>This release is available in <a href="/2020/08/24/announcing-new-apt-and-rpm-repositories.html">Bintray’s apt and rpm repositories post</a>, as well as GitHub release artifacts. The <a href="https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/">sunsetting of Bintray</a> took us by surprise. We will need to make another move to change the repository location. Luckily we learned enough from the previous process, and not everything is lost. We will attempt to keep the installation script API stable.</p>

<p>We have been able to do all of this thanks to the continued support of <a href="https://www.84codes.com/">84codes</a>, <a href="https://nikolamotor.com/">Nikola Motor Company</a> and every other <a href="/sponsors">sponsor</a>. To maintain and increase the development pace, donations and sponsorships are essential. <a href="https://opencollective.com/crystal-lang">OpenCollective</a> is available for that. Reach out to <a href="mailto:crystal@manas.tech">crystal@manas.tech</a> if you’d like to become a direct sponsor or find other ways to support Crystal. We thank you in advance!</p>

      </div>
      <div class="col m1"></div>
    </div>

    <div class="row disqus">
      <div class="col m2"></div>
      <div class="col s12 m9" id='disqus_thread'>
        <p>The release of the first major release of Crystal arrives after many years of hard work. With thousands of contributions from people worldwide, it was finally possible to find consensus for what truly mattered for 1.0 and what could wait for future releases. Getting here wasn’t an easy journey, filled with enriching, controversial, delightful, and endless conversations that, in the end, made it possible to build a language more useful for more users.</p>

<p>But what does it mean to have a 1.0 version? After all, the process of receiving valuable contributions and evolving the language will not stop after this milestone. Let’s dig deeper to understand the true meaning of this release for the community, especially those already using Crystal in production environments.</p>

<h2 id="language-stability">Language Stability</h2>

<p>Language stability is probably one of the most prominent and expected reasons to have Crystal 1.0 finally. We received numerous comments from people willing to use the language in production during all these years, but only after we could make a promise of not breaking it from one day to the next.</p>

<p>After this release, everyone can expect that, at least for any future 1.x version, your code can still compile and work without any significant incompatibility. Language and standard library features won’t be removed or changed in any way that could prevent existing code from compiling and working. The built-in standard library will continue to be enriched but always with backward compatibility in mind.</p>

<p>Nobody can stop this outstanding community from having groundbreaking ideas every day. But those contributions now belong to a separate branch where the vision for Crystal 2.0 will start to sprout and grow every day.</p>

<h2 id="release-plan">Release Plan</h2>

<p>To increase the project’s predictability, we plan to release maintenance releases (aka bug fixes) as patch versions. For example, the first maintenance release will be 1.0.1, and it will only include fixes of existing features.</p>

<p>New features will be reserved for the subsequent minor releases: 1.x. Again, always maintaining backward compatibility with previous versions.</p>

<p>How many 1.x versions are going to be maintained in parallel? We don’t know for sure yet. That will depend on several factors, including the availability of core team members. For now, we envision maintaining at least two minor versions. That means a 1.0.x might be released even if 1.1.0 is published.</p>

<p>Because of the “no breaking changes” rule between 1.x → 1.x+1, migration to new minor releases should be relatively easy, with migration plans to be eventually released along with new versions.</p>

<h2 id="preliminary-features">Preliminary Features</h2>

<p>There are some features currently available in Crystal that didn’t receive official support yet. We plan to keep improving them until we’re confident about their stability. These features will continue to be available on every version, and you can expect an official blessing in a future 1.x release.</p>

<h3 id="windows-support">Windows Support</h3>

<p>Tremendous progress has been made to make Crystal available on Windows platforms. But there is still tons of work to be done. However, none of that work should impact the semantics or libraries available for *NIX platforms. So we decided not to delay 1.0 because of incompleteness in this area.</p>

<p>We keep encouraging the Windows community to continue participating in the support for Crystal in this environment.</p>

<h3 id="multithreading">Multithreading</h3>

<p>Support to run the Crystal runtime on multiple cores is still a preliminary feature available through the use of the <code class="language-crystal highlighter-rouge"><span class="o">-</span><span class="no">Dpreview_mt</span></code> flag. But there are still many improvements yet to be made to guarantee the language’s expected performance and quality in a multi-core environment.</p>

<p>And it’s not only a flag to be enabled to let existing code run in parallel. Idioms and guidelines must be written to ensure a sane migration into a multi-core environment. More of this can be expected in future 1.x releases.</p>

<h3 id="arm">ARM</h3>

<p>Porting Crystal into ARM platforms was always important, mainly for embedded and mobile devices. Who didn’t dream about writing applications for iOS and Android one day in this beautiful language? However, recent announcements from Apple to use ARM in computers made this platform even more relevant for the language.</p>

<p>Significant steps have been taken to improve Crystal code’s cross-compilation, and even our CI runs most of the Crystal specs for every commit on ARM servers! However, some work is still pending to improve the experience for cross-compilation, and even some core libraries need work before we can be confident to give the “production-ready” mark on ARM machines.</p>

<h1 id="changes-this-release">Changes this release</h1>

<p>The changes that landed in 1.0.0 since 0.36.1 were focused on polishing, but it is worth mentioning some of them here as a migration process. Don’t miss out on the rest of the <a href="https://github.com/crystal-lang/crystal/releases/tag/1.0.0">release changelog</a>.</p>

<p>There were <a href="https://github.com/crystal-lang/crystal/compare/0.36.1...1.0.0">82 commits since 0.36.1</a> by 25 contributors.</p>

<p>If we count them since the project inception, there were +13000 commits by +450 contributors, +9000 issues/PRs, and, more importantly, a great community that is sharing experiences, ideas and dreams.</p>

<h2 id="language-changes">Language changes</h2>

<p>Tuples allow type-safe accessors with literal indices since the compiler knows which type each component is. In <a href="https://github.com/crystal-lang/crystal/pull/10379">#10379</a> this knowledge is also available for literal ranges.</p>

<div class="language-crystal highlighter-rouge"><div class="highlight"><pre class="code_section"><code><span class="n">tuple</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"hello"</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">}</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">tuple</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; {1, "hello"}</span>
<span class="n">typeof</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>       <span class="c1"># =&gt; Tuple(Int32, String)</span>
</code></pre></div></div>

<p>String and character literals are no longer allowed to have unicode surrogate halves in escape sequences. You can express arbitrary values using <code class="language-crystal highlighter-rouge"><span class="p">\</span><span class="n">x</span></code> still, so <code class="language-crystal highlighter-rouge"><span class="s2">"</span><span class="se">\uD800</span><span class="s2">"</span></code> should be <code class="language-crystal highlighter-rouge"><span class="s2">"</span><span class="se">\xED\xA0\x80</span><span class="s2">"</span></code>. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10443">#10443</a>.</p>

<h2 id="standard-library">Standard library</h2>

<p>The std-lib got rid of most of the deprecated definitions present until 0.36.1 in <a href="https://github.com/crystal-lang/crystal/pull/10386">#10386</a>. This includes dropping:</p>

<ul>
  <li>Spec <code class="language-crystal highlighter-rouge"><span class="n">should</span></code>, <code class="language-crystal highlighter-rouge"><span class="n">should_not</span></code> overload</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Int</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">String</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Time</span></code> overloads with trailing <code class="language-crystal highlighter-rouge"><span class="no">IO</span></code> parameter</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Set</span></code> methods</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">YAML</span><span class="p">.</span><span class="nf">new</span></code></li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Dir</span><span class="p">.</span><span class="nf">rmdir</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">File</span><span class="o">::</span><span class="no">Info</span><span class="c1">#owner</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">File</span><span class="o">::</span><span class="no">Info</span><span class="c1">#group</span></code></li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">Request</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">WebSocket</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">LogHandler</span></code> methods</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">URI</span><span class="c1">#full_path</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Time</span><span class="o">::</span><span class="no">Span</span><span class="c1">#duration</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">StaticArray</span><span class="c1">#[]=</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Hash</span><span class="c1">#delete_if</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Process</span><span class="c1">#kill</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">OptionParser</span><span class="p">.</span><span class="nf">parse!</span></code> method</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">Log</span><span class="p">.</span><span class="nf">setup_from_env</span></code> overload</li>
  <li><code class="language-crystal highlighter-rouge"><span class="n">has_attribute?</span></code> macro</li>
</ul>

<h3 id="macros">Macros</h3>

<p>The <code class="language-crystal highlighter-rouge"><span class="kp">getter</span></code> and <code class="language-crystal highlighter-rouge"><span class="kp">property</span></code> macros will add the return type annotation when possible. While adding this lazy initialized property no longer accepts <code class="language-crystal highlighter-rouge"><span class="kp">nil</span></code> as a valid value. It’s confusing and you probably were not relying on that. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10405">#10405</a>.</p>

<h3 id="numeric">Numeric</h3>

<p>There were some iterations to add more rounding options to <code class="language-crystal highlighter-rouge"><span class="no">Number</span></code> and match the functionality available in other languages. <code class="language-crystal highlighter-rouge"><span class="no">Number</span><span class="c1">#round</span></code> accepts a <code class="language-crystal highlighter-rouge"><span class="no">RoundingMode</span></code> parameter to choose the exact criteria to use. There are new methods like <code class="language-crystal highlighter-rouge"><span class="no">Number</span><span class="c1">#round_even</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Number</span><span class="c1">#round_away</span></code> if you prefer them. The default rounding was changed to <code class="language-crystal highlighter-rouge"><span class="n">round_even</span></code> (a.k.a.: round nearest ties even) matching what other libc, Java, Julia and <a href="https://web.archive.org/web/20160806053349/http://www.csee.umbc.edu/~tsimo1/CMSC455/IEEE-754-2008.pdf">IEEE-754</a> recommendation.</p>

<p>The new available rounding modes are:</p>

<ul>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TIES_EVEN</span></code>: Rounds towards the nearest integer. If both neighboring integers are equidistant, rounds towards the even neighbor (Banker’s rounding).</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TIES_AWAY</span></code>: Rounds towards the nearest integer. If both neighboring integers are equidistant, rounds away from zero.</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TO_ZERO</span></code>: Rounds towards zero (truncate).</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TO_POSITIVE</span></code>: Rounds towards positive infinity (ceil).</li>
  <li><code class="language-crystal highlighter-rouge"><span class="no">TO_NEGATIVE</span></code>: Rounds towards negative infinity (floor).</li>
</ul>

<p>Read more at <a href="https://github.com/crystal-lang/crystal/pull/10413">#10413</a> and <a href="https://github.com/crystal-lang/crystal/pull/10508">#10508</a>.</p>

<p>Downcasting a float with infinity, or converting an out-of-range float has a more accurate behavior. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10420">#10420</a>.</p>

<h3 id="collections">Collections</h3>

<p><code class="language-crystal highlighter-rouge"><span class="no">Enumerable</span><span class="c1">#flat_map</span></code>, <code class="language-crystal highlighter-rouge"><span class="no">Iterator</span><span class="c1">#flat_map</span></code> works now with mixed element types. As a general guideline, when dealing with multiple types of elements, check your design. You might be translating code from other languages where that is common, but in Crystal, it might not be the tidiest thing to do. Either way, in <a href="https://github.com/crystal-lang/crystal/pull/10329">#10329</a> there is room for improvement on how things are done in the std-lib to allow more and more use cases while using the existing language features.</p>

<h3 id="serialization">Serialization</h3>

<p><code class="language-crystal highlighter-rouge"><span class="no">Enum</span></code> serialization is now done as underscored string representation. If you want the old behavior, use the <code class="language-crystal highlighter-rouge"><span class="no">Enum</span><span class="o">::</span><span class="no">ValueConverter</span></code>. Using the underscore string representation is more stable if enum members are added, so we encourage it as a good default. Read more at  <a href="https://github.com/crystal-lang/crystal/pull/10431">#10431</a>.</p>

<p>The types defined in the XML module were changed from struct to classes to allow future improvements on how the GC interacts with libxml. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10436">#10436</a>.</p>

<h3 id="networking">Networking</h3>

<p>There are a couple of changes regarding how cookies are handled. In <a href="https://github.com/crystal-lang/crystal/pull/10486">#10486</a> the <code class="language-crystal highlighter-rouge"><span class="no">HTTP</span><span class="o">::</span><span class="no">Cookies</span><span class="p">.</span><span class="nf">from_headers</span></code> method is split into separate server and client alternatives. And the cookie name and values are no longer encoded/decoded due to security reasons. Read more at <a href="https://github.com/crystal-lang/crystal/pull/10442">#10442</a> and <a href="https://github.com/crystal-lang/crystal/pull/10485">#10485</a>. It is left to the framework and application to choose if there is a default encoding for cookies.</p>

<h2 id="next-steps">Next steps</h2>

<p>This release is available in <a href="/2020/08/24/announcing-new-apt-and-rpm-repositories.html">Bintray’s apt and rpm repositories post</a>, as well as GitHub release artifacts. The <a href="https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/">sunsetting of Bintray</a> took us by surprise. We will need to make another move to change the repository location. Luckily we learned enough from the previous process, and not everything is lost. We will attempt to keep the installation script API stable.</p>

<p>We have been able to do all of this thanks to the continued support of <a href="https://www.84codes.com/">84codes</a>, <a href="https://nikolamotor.com/">Nikola Motor Company</a> and every other <a href="/sponsors">sponsor</a>. To maintain and increase the development pace, donations and sponsorships are essential. <a href="https://opencollective.com/crystal-lang">OpenCollective</a> is available for that. Reach out to <a href="mailto:crystal@manas.tech">crystal@manas.tech</a> if you’d like to become a direct sponsor or find other ways to support Crystal. We thank you in advance!</p>

      </div>
      <div class="col m1"></div>
    </div>
  </div>
</main>


  <footer>
  <div class="row">
    <div class="col s12 m12 l6 crystal">
      Crystal is licensed under the Apache License,
      <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>
        Version 2.0
      </a>
    </div>
    <div class="col s12 m12 l6 manas right-align black-text">
      Crystal language, born & raised at
      <a href="https://manas.tech" target="_blank" class="black-text">Manas</a>
      <a href="https://manas.tech" target="_blank" class="logo">
        <i class="manas"></i>
      </a>
    </div>
  </div>
</footer>

</div>


    <script src="/assets/js/bundle.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42353458-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
